
updateIcon:
    
    { 
        bMoveWin := false
        startPointX := startPointY:= 0
        myX := (gameX * skillbar_automove.x)+begin_x+75
        myY := (gameY * skillbar_automove.y)+begin_y-20
        
        Gui, updateIcon:+AlwaysOnTop -Caption +ToolWindow +LastFound
        hGui1 := WinExist()
        Gui, updateIcon:Margin, 0, 0
        Gui updateIcon:Add, Picture, gBuffCycle w32 h32, u.png
        Gui updateIcon:Show, x%myX% y%myY% NoActivate
        
        SetTimer, MoveTimer, 100
        return
    }
    
    
    #If IsWinUnderMouse(hGui1)
        *RButton::
        
        bMoveWin := true
        MouseGetPos, x, y
        startPointX := x
        startPointY := y	
    return
    
    *RButton Up::
        bMoveWin := false
    return
    
    MoveTimer:
        if(bMoveWin){
            MouseGetPos, x, y
            deltaX := startPointX - x
            deltaY := startPointY - y
            WinGetPos, currentX, currentY,,, ahk_id %hGui1%
            WinMove, ahk_id %hGui1%,, currentX - deltaX, currentY - deltaY
            
            startPointX := x
            startPointY := y
        }
    return
    
    
    IsWinUnderMouse(hwnd) {
        
        MouseGetPos,,, hWinUnderMouse
    return (hwnd == hWinUnderMouse)
}
